<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Анкета блогера — Bloggers.tools</title>

  <!-- Preload critical resources -->
  <link rel="preload" href="/css/base.css" as="style">
  <link rel="preload" href="/css/layout.css" as="style">
  <link rel="preload" href="/js/include.js" as="script">

  <!-- Preconnect to external domains -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

  <!-- DNS-prefetch для внешних ресурсов -->
  <link rel="dns-prefetch" href="https://api.example.com">

  <!-- Установите цвет темы -->
  <meta name="theme-color" content="#ffffff">

  <!-- Стили -->
  <link rel="stylesheet" href="../css/base.css?v=5" />
  <link rel="stylesheet" href="../css/layout.css?v=5" />

  <!-- Вставка общих компонентов -->
  <script defer src="../js/include.js?v=5"></script>

  <style>
    .blogger-profile {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
    }
    
    .profile-header {
      display: grid;
      grid-template-columns: auto 1fr auto;
      gap: 20px;
      align-items: center;
      background: var(--surface);
      padding: 20px;
      border-radius: var(--radius);
      border: 1px solid var(--surface-border);
      margin-bottom: 20px;
    }
    
    .blogger-avatar {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      background: linear-gradient(135deg, var(--accent) 0%, var(--primary) 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: bold;
      font-size: 1.5em;
    }
    
    .blogger-info h1 {
      color: var(--text-on-surface);
      margin: 0 0 10px 0;
      font-size: 1.8em;
    }
    
    .blogger-badges {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
    }
    
    .profile-grid {
      display: grid;
      grid-template-columns: 2fr 1fr;
      gap: 20px;
    }
    
    .metrics-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 12px;
      margin-bottom: 20px;
    }
    
    .metric-card {
      background: var(--surface);
      border: 1px solid var(--surface-border);
      border-radius: var(--radius);
      padding: 15px;
      text-align: center;
    }
    
    .metric-value {
      font-size: 1.5em;
      font-weight: bold;
      color: var(--primary);
      margin-bottom: 5px;
    }
    
    .metric-label {
      color: var(--text-muted);
      font-size: 0.9em;
    }
    
    .tabs {
      display: flex;
      gap: 8px;
      margin-bottom: 20px;
      border-bottom: 1px solid var(--surface-border);
      padding-bottom: 10px;
    }
    
    .tab {
      padding: 8px 16px;
      background: transparent;
      border: 1px solid var(--surface-border);
      border-radius: 20px;
      color: var(--text-muted);
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .tab:hover,
    .tab.active {
      background: var(--accent);
      color: white;
      border-color: var(--accent);
    }
    
    .notes-section {
      background: var(--surface);
      border: 1px solid var(--surface-border);
      border-radius: var(--radius);
      padding: 20px;
      margin-bottom: 20px;
    }
    
    .notes-list {
      margin-top: 15px;
    }
    
    .note-card {
      background: var(--surface-2);
      border: 1px solid var(--surface-border);
      border-radius: var(--radius-sm);
      padding: 15px;
      margin-bottom: 10px;
    }
    
    .note-date {
      color: var(--text-muted);
      font-size: 0.8em;
      margin-bottom: 5px;
    }
    
    .note-text {
      color: var(--text-on-surface);
      margin: 0;
    }
    
    textarea {
      width: 100%;
      min-height: 100px;
      border-radius: var(--radius-sm);
      border: 1px solid var(--surface-border);
      background: var(--surface);
      color: var(--text-on-surface);
      padding: 12px;
      resize: vertical;
    }
    
    .sidebar {
      display: flex;
      flex-direction: column;
      gap: 20px;
    }
    
    .sidebar-card {
      background: var(--surface);
      border: 1px solid var(--surface-border);
      border-radius: var(--radius);
      padding: 20px;
    }
    
    .audience-list {
      display: flex;
      flex-direction: column;
      gap: 8px;
      margin-top: 10px;
    }
    
    .similar-bloggers {
      display: flex;
      flex-direction: column;
      gap: 10px;
      margin-top: 10px;
    }
    
    .similar-blogger {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 10px;
      background: var(--surface-2);
      border: 1px solid var(--surface-border);
      border-radius: var(--radius-sm);
      text-decoration: none;
      color: var(--text-on-surface);
      transition: all 0.3s ease;
    }
    
    .similar-blogger:hover {
      background: var(--surface);
      border-color: var(--accent);
    }
    
    .similar-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: linear-gradient(135deg, var(--accent) 0%, var(--primary) 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: bold;
      font-size: 0.9em;
    }
    
    @media (max-width: 768px) {
      .profile-grid {
        grid-template-columns: 1fr;
      }
      
      .metrics-grid {
        grid-template-columns: repeat(2, 1fr);
      }
      
      .profile-header {
        grid-template-columns: 1fr;
        text-align: center;
      }
    }
  </style>
</head>
<body>

  <!-- Шапка: вставляется один раз -->
  <div data-include="../components/header.html"></div>

  <main class="container blogger-profile">
    <!-- Заголовок профиля -->
    <div class="profile-header">
      <div class="blogger-avatar" id="bloggerAvatar">АС</div>
      <div class="blogger-info">
        <h1 id="bloggerName">Анна Сидорова</h1>
        <div class="blogger-badges">
          <span class="badge">Instagram</span>
          <span class="badge">RU</span>
          <span class="badge">Красота</span>
          <span class="badge">18–24</span>
        </div>
      </div>
      <button class="btn btn-accent" onclick="saveToList()">В отложенные</button>
    </div>

    <div class="profile-grid">
      <!-- Основной контент -->
      <div class="main-content">
        <!-- Метрики -->
        <div class="metrics-grid">
          <div class="metric-card">
            <div class="metric-value">87K</div>
            <div class="metric-label">Подписчики</div>
          </div>
          <div class="metric-card">
            <div class="metric-value">7.2%</div>
            <div class="metric-label">ER</div>
          </div>
          <div class="metric-card">
            <div class="metric-value">34K</div>
            <div class="metric-label">Avg views</div>
          </div>
          <div class="metric-card">
            <div class="metric-value">$1,800</div>
            <div class="metric-label">Цена</div>
          </div>
        </div>

        <!-- Табы -->
        <div class="tabs">
          <button class="tab active">Обзор</button>
          <button class="tab">Аудитория</button>
          <button class="tab">Контент</button>
          <button class="tab">История</button>
        </div>

        <!-- Заметки -->
        <div class="notes-section">
          <h3>Добавить заметку</h3>
          <textarea id="noteInput" placeholder="Мысль, договорённости, риски…"></textarea>
          <div style="margin-top: 15px;">
            <button class="btn" onclick="saveNote()">Сохранить заметку</button>
          </div>
        </div>

        <!-- Список заметок -->
        <div class="notes-section">
          <h3>Заметки</h3>
          <div id="notesList" class="notes-list">
            <!-- Заметки будут добавляться здесь -->
          </div>
        </div>
      </div>

      <!-- Сайдбар -->
      <aside class="sidebar">
        <!-- Аудитория -->
        <div class="sidebar-card">
          <h3>Аудитория</h3>
          <div class="audience-list">
            <div>Гео: RU 80%, EN 10%, ES 5%</div>
            <div>Пол: 70% ж, 30% м</div>
            <div>Возраст: 18–24 (60%), 25–34 (30%)</div>
          </div>
        </div>

        <!-- Похожие блогеры -->
        <div class="sidebar-card">
          <h3>Похожие блогеры</h3>
          <div class="similar-bloggers">
            <a href="#" class="similar-blogger">
              <div class="similar-avatar">МИ</div>
              <div>
                <strong>Мария Иванова</strong>
                <div style="font-size: 0.9em; color: var(--text-muted);">TikTok · 95K</div>
              </div>
            </a>
            <a href="#" class="similar-blogger">
              <div class="similar-avatar">ЕВ</div>
              <div>
                <strong>Елена Васнецова</strong>
                <div style="font-size: 0.9em; color: var(--text-muted);">Instagram · 120K</div>
              </div>
            </a>
          </div>
        </div>
      </aside>
    </div>
  </main>

  <!-- Подвал: вставляется один раз -->
  <div data-include="../components/footer.html"></div>

  <script>
    // Инициализация при загрузке
    document.addEventListener("DOMContentLoaded", function() {
      // Получаем ID блогера из URL
      const urlParams = new URLSearchParams(window.location.search);
      const bloggerId = urlParams.get('id') || '1';
      
      // Загружаем данные блогера (заглушка)
      loadBloggerData(bloggerId);
      
      // Загружаем заметки
      loadNotes(bloggerId);
      
      // Инициализируем табы
      initTabs();
    });

    // Загрузка данных блогера (заглушка)
    function loadBloggerData(bloggerId) {
      const bloggers = {
        '1': { name: 'Анна Сидорова', avatar: 'АС', platform: 'Instagram', followers: '87K', category: 'Красота' },
        '2': { name: 'Иван Петров', avatar: 'ИП', platform: 'YouTube', followers: '125K', category: 'Техника' },
        '3': { name: 'Сергей Козлов', avatar: 'СК', platform: 'YouTube', followers: '356K', category: 'Игры' }
      };
      
      const blogger = bloggers[bloggerId] || bloggers['1'];
      
      document.getElementById('bloggerName').textContent = blogger.name;
      document.getElementById('bloggerAvatar').textContent = blogger.avatar;
    }

    // Загрузка заметок
    function loadNotes(bloggerId) {
      const notesKey = `blogger_notes_${bloggerId}`;
      const notes = JSON.parse(localStorage.getItem(notesKey) || '[]');
      const notesList = document.getElementById('notesList');
      
      notesList.innerHTML = '';
      
      notes.forEach(note => {
        const noteElement = document.createElement('div');
        noteElement.className = 'note-card';
        noteElement.innerHTML = `
          <div class="note-date">${new Date(note.timestamp).toLocaleString()}</div>
          <p class="note-text">${note.text}</p>
        `;
        notesList.appendChild(noteElement);
      });
    }

    // Сохранение заметки
    function saveNote() {
      const urlParams = new URLSearchParams(window.location.search);
      const bloggerId = urlParams.get('id') || '1';
      const noteInput = document.getElementById('noteInput');
      const text = noteInput.value.trim();
      
      if (!text) {
        alert('Введите текст заметки');
        return;
      }
      
      const notesKey = `blogger_notes_${bloggerId}`;
      const notes = JSON.parse(localStorage.getItem(notesKey) || '[]');
      
      notes.unshift({
        text: text,
        timestamp: Date.now()
      });
      
      localStorage.setItem(notesKey, JSON.stringify(notes));
      noteInput.value = '';
      
      // Перезагружаем заметки
      loadNotes(bloggerId);
    }

    // Добавление в отложенные
    function saveToList() {
      const urlParams = new URLSearchParams(window.location.search);
      const bloggerId = urlParams.get('id') || '1';
      
      const saved = JSON.parse(localStorage.getItem('saved_bloggers') || '[]');
      if (!saved.includes(bloggerId)) {
        saved.push(bloggerId);
        localStorage.setItem('saved_bloggers', JSON.stringify(saved));
        alert('Блогер добавлен в отложенные');
      } else {
        alert('Блогер уже в отложенных');
      }
    }

    // Инициализация табов
    function initTabs() {
      const tabs = document.querySelectorAll('.tab');
      tabs.forEach(tab => {
        tab.addEventListener('click', function() {
          tabs.forEach(t => t.classList.remove('active'));
          this.classList.add('active');
          // Здесь можно добавить логику переключения контента
        });
      });
    }
  </script>
</body>
</html>